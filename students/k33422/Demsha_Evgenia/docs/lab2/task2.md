# Задание 2

`Задача:` Напишите программу на Python для параллельного парсинга нескольких веб-страниц с сохранением данных в базу данных с использованием подходов threading, multiprocessing и async. Каждая программа должна парсить информацию с нескольких веб-сайтов, сохранять их в базу данных.

В этом задании будем заполнять таблицу Account (Платежный аккаунт/средство) из предыдущей лабораторной работы.
Для этого используем сайт со списком криптовалют.

Этот скрипт поможет собрать все ссылки на страницы криптовалют и сохранит их в файле settings.py.

```Python
--8<-- "laboratory_work_2/asynchrony/task2/get_urls.py"
```

Далее реализуем функции для парсинга названия криптовалюты и текущей цены и сохранения этой информации в базу данных (
предположим, что у нас есть по одной монете каждой криптовалюты, тогда баланс нашего "криптокошелька" будет равен текущей цене одного токена)
В этом же файле запуск наивного подхода, при котором мы последовательно собираем и сохраняем данные для каждого адреса.

```Python
--8<-- "laboratory_work_2/asynchrony/task2/naive.py"
```
Теперь распараллелим парсинг с помощью потоков:

```Python
--8<-- "laboratory_work_2/asynchrony/task2/thrd.py"
```
С помощью процессов:

```Python
--8<-- "laboratory_work_2/asynchrony/task2/mltypr.py"
```
И с помощью асинхронности:

```Python
--8<-- "laboratory_work_2/asynchrony/task2/asnc.py"
```
Сравнительная таблица времени работы в секундах:

| № | naive     | threading | multiprocessing | asyncio  |
|---|-----------|----------|----------------|----------|
| 1 | 11.13098  | 1.79124  | 10.08855          | 1.303249 |
| 2 | 11.81796  | 1.48701  | 9.557107          | 1.543544 |
| 3 | 10.52666 | 1.38947  | 10.33533         | 1.49618  |

Среди ненаивних подходов хуже всех показала себя мультипроцессность :(
Но все равно методы распараллеливания парсинга дают существенное улучшение по времени.

