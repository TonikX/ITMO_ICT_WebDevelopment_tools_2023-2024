# Создание поездок

## Создание новой поездки

Для создания новой поездки пользователи должны использовать POST запрос на `/trips/my/`. Этот
эндпойнт
принимает данные о поездке и выполняет следующие действия:

### Процесс создания поездки

1. **Получение данных пользователя:** В начале обрабатывается профиль пользователя, который
   инициирует создание поездки.
2. **Сбор данных о поездке:** Принимаются данные от пользователя, такие как дата поездки, маршрут,
   продолжительность и другие детали.
3. **Создание записи поездки:** Данные о поездке регистрируются в системе, привязываясь к профилю
   пользователя.

### Реализация:

```python
@router.post('/my/', response_model=Annotated[MyTripSingleAfterOperation, Depends()])
async def create_my_trip(
    data: Annotated[CreateMyTrip, Body()],
    user: Annotated[User, Depends(get_user_profile)]
):
    return await repository.create(
        dict(
            **data.model_dump(),
            profile_id=user.profile.id
        )
    )
```

## Описание параметров

- **CreateMyTrip:** Модель данных, включающая всю необходимую информацию о поездке.
- **MyTripSingleAfterOperation:** Модель ответа, которая описывает структуру данных поездки после её
  создания в системе.

## Зависимости

- **Depends(get_user_profile):** Зависимость, используемая для извлечения профиля пользователя,
  который авторизован и инициирует создание поездки.

## Сценарий использования

1. **Авторизация:** Пользователь должен быть авторизован в системе.
2. **Ввод данных:** Пользователь вводит все требуемые данные о поездке в соответствующую форму на
   сайте или в приложении.
3. **Отправка запроса:** После заполнения формы отправляется запрос на сервер для создания поездки.
4. **Обратная связь:** Пользователь получает подтверждение о успешном создании поездки или
   информацию об ошибке, если что-то пошло не так.
